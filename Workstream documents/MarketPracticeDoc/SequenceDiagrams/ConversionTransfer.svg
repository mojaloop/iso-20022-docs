<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1064px" preserveAspectRatio="none" style="width:1116px;height:1064px;background:#FFFFFF;" version="1.1" viewBox="0 0 1116 1064" width="1116px" zoomAndPan="magnify"><defs/><g><rect height="27.6094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="419" x="349.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="409" x="354.5" y="29.5332">Committing to providing Liquidity ISO 20022 Message Flow</text><rect height="415.3828" style="stroke:#000000;stroke-width:1.5;fill:none;" width="766" x="343" y="595.7109"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="399" x2="399" y1="76.2188" y2="1028.0938"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="576.5" x2="576.5" y1="76.2188" y2="1028.0938"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="755" x2="755" y1="76.2188" y2="1028.0938"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="353" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="360" y="65.1426">Payer DFSP</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="353" y="1027.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="360" y="1048.627">Payer DFSP</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="541.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="548.5" y="65.1426">Mojaloop</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="541.5" y="1027.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="548.5" y="1048.627">Mojaloop</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="662" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="669" y="65.1426">Foreign Exchange Provider</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="662" y="1027.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="669" y="1048.627">Foreign Exchange Provider</text><polygon fill="#181818" points="565,303.7891,575,307.7891,565,311.7891,569,307.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="571" y1="307.7891" y2="307.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="406" y="302.9326">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="417" y="302.9326">POST /fxTransfer</text><path d="M5,91.2188 L5,509.2188 L394,509.2188 L394,101.2188 L384,91.2188 L5,91.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M384,91.2188 L384,101.2188 L394,101.2188 L384,91.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="79" x="11" y="109.7139">pacs.091.001</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="320" x="11" y="126.0654">Financial Institution Credit Transfer Quote Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="142.417">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="11" y="158.7686">"GrpHdr":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="27" y="175.1201">"MsgId":"01JBVM1BW4J0RJZSQ539QB9TKT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="27" y="191.4717">"CreDtTm":"2024-11-04T12:57:44.580Z",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="27" y="207.8232">"NbOfTxs":"1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="27" y="224.1748">"SttlmInf":{"SttlmMtd":"CLRG"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="27" y="240.5264">"PmtInstrXpryDtTm":"2024-11-04T12:58:44.579Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="11" y="256.8779">"CdtTrfTxInf":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="27" y="273.2295">"PmtId":{"TxId":"01JBVM16V1ZXP2DM34BQT40NWA",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="63" y="289.5811">"EndToEndId":"01JBVM13SQYP507JB1DYBZVCMF"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="27" y="305.9326">"Dbtr":{"FinInstnId":{"Othr":{"Id":"payer-dfsp"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="27" y="322.2842">"UndrlygCstmrCdtTrf":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="59" y="338.6357">"Dbtr":{"Id":{"OrgId":{"Othr":{"Id":"payer-dfsp"}}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="59" y="354.9873">"DbtrAgt":{"FinInstnId":{"Othr":{"Id":"payer-dfsp"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="59" y="371.3389">"Cdtr":{"Id":{"OrgId":{"Othr":{"Id":"fxp"}}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="59" y="387.6904">"CdtrAgt":{"FinInstnId":{"Othr":{"Id":"fxp"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="59" y="404.042">"InstdAmt":{"Ccy":"ZMW",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="75" y="420.3936">"ActiveOrHistoricCurrencyAndAmount":"21"}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="59" y="436.7451">"Cdtr":{"FinInstnId":{"Othr":{"Id":"fxp"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="59" y="453.0967">"IntrBkSttlmAmt":{"Ccy":"MWK",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="75" y="469.4482">"ActiveCurrencyAndAmount":"1080"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="59" y="485.7998">"VrfctnOfTerms":{"Sh256Sgntr":"KVHFmdTD6A..."}}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="502.1514">}</text><polygon fill="#181818" points="743,533.3594,753,537.3594,743,541.3594,747,537.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="577" x2="749" y1="537.3594" y2="537.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="584" y="532.5029">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="595" y="532.5029">POST /fxTransfer</text><line style="stroke:#181818;stroke-width:1.0;" x1="755" x2="797" y1="567.7109" y2="567.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="797" x2="797" y1="567.7109" y2="580.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="756" x2="797" y1="580.7109" y2="580.7109"/><polygon fill="#181818" points="766,576.7109,756,580.7109,766,584.7109,762,580.7109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="762" y="562.8545">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="773" y="562.8545">Check to see liquidity for the transfer can still be provided.</text><path d="M343,595.7109 L404,595.7109 L404,604.0625 L394,614.0625 L343,614.0625 L343,595.7109 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="415.3828" style="stroke:#000000;stroke-width:1.5;" width="766" x="343" y="595.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="358" y="610.2061">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="223" x="419" y="609.1299">[if FXP can provide the payment liquidity]</text><polygon fill="#181818" points="588,717.1719,578,721.1719,588,725.1719,584,721.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="582" x2="754" y1="721.1719" y2="721.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="594" y="716.3154">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="605" y="716.3154">PUT /fxTransfer/{ID}</text><path d="M760,619.0625 L760,808.0625 L1073,808.0625 L1073,629.0625 L1063,619.0625 L760,619.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1063,619.0625 L1063,629.0625 L1073,629.0625 L1063,619.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="766" y="637.5576">pacs.002.001.15</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="270" x="766" y="653.9092">Financial Institution to Financial Institution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1036" y="653.9092"> </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="766" y="670.2607">Payment Status Report</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="766" y="686.6123">"GrpHdr": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="782" y="702.9639">"MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="782" y="719.3154">"CreDtTm":"2024-11-04T12:57:45.228Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="766" y="735.667">"TxInfAndSts":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="782" y="752.0186">"ExctnConf":"ou1887jmG-l...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="782" y="768.3701">"PrcgDt":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="798" y="784.7217">"DtTm":"2024-11-04T12:57:45.213Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="798" y="801.0732">"TxSts":"RESV"}}</text><polygon fill="#181818" points="410,832.2813,400,836.2813,410,840.2813,406,836.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="404" x2="576" y1="836.2813" y2="836.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="416" y="831.4248">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="427" y="831.4248">PUT /fxTransfer/{ID}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="343" x2="1109" y1="845.2813" y2="845.2813"/><polygon fill="#181818" points="588,916.6875,578,920.6875,588,924.6875,584,920.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="582" x2="754" y1="920.6875" y2="920.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="594" y="915.8311">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="605" y="915.8311">PUT /fxTransfer/{ID}/error</text><path d="M760,851.2813 L760,975.2813 L1094,975.2813 L1094,861.2813 L1084,851.2813 L760,851.2813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1084,851.2813 L1084,861.2813 L1094,861.2813 L1084,851.2813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="766" y="869.7764">pacs.002.001.15</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="270" x="766" y="886.1279">Financial Institution to Financial Institution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1036" y="886.1279"> </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="766" y="902.4795">Payment Status Report</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="766" y="918.8311">"GrpHdr": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="782" y="935.1826">"MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="782" y="951.5342">"CreDtTm":"2024-11-04T12:57:45.228Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="766" y="967.8857">"TxInfAndSts":{"StsRsnInf":{"Rsn": {"Cd":"ErrorCode"}}</text><polygon fill="#181818" points="410,999.0938,400,1003.0938,410,1007.0938,406,1003.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="404" x2="576" y1="1003.0938" y2="1003.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="416" y="998.2373">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="427" y="998.2373">PUT /fxTransfer/{ID}/error</text><!--MD5=[8bb25dde25da2b027b38ae3592be623a]
@startuml

Title Committing to providing Liquidity ISO 20022 Message Flow
participant PayerDFSP as "Payer DFSP"
participant Mojaloop as "Mojaloop"
participant FXP as "Foreign Exchange Provider"

autonumber

PayerDFSP -> Mojaloop: POST /fxTransfer
note left
**pacs.091.001**
**Financial Institution Credit Transfer Quote Request**
{
"GrpHdr":{
    "MsgId":"01JBVM1BW4J0RJZSQ539QB9TKT",
    "CreDtTm":"2024-11-04T12:57:44.580Z",
    "NbOfTxs":"1",
    "SttlmInf":{"SttlmMtd":"CLRG"},
    "PmtInstrXpryDtTm":"2024-11-04T12:58:44.579Z"},
"CdtTrfTxInf":{
    "PmtId":{"TxId":"01JBVM16V1ZXP2DM34BQT40NWA",
             "EndToEndId":"01JBVM13SQYP507JB1DYBZVCMF"},
    "Dbtr":{"FinInstnId":{"Othr":{"Id":"payer-dfsp"}}},
    "UndrlygCstmrCdtTrf":{
            "Dbtr":{"Id":{"OrgId":{"Othr":{"Id":"payer-dfsp"}}}},
            "DbtrAgt":{"FinInstnId":{"Othr":{"Id":"payer-dfsp"}}},
            "Cdtr":{"Id":{"OrgId":{"Othr":{"Id":"fxp"}}}},
            "CdtrAgt":{"FinInstnId":{"Othr":{"Id":"fxp"}}},
            "InstdAmt":{"Ccy":"ZMW",
                "ActiveOrHistoricCurrencyAndAmount":"21"}},
            "Cdtr":{"FinInstnId":{"Othr":{"Id":"fxp"}}},
            "IntrBkSttlmAmt":{"Ccy":"MWK",
                "ActiveCurrencyAndAmount":"1080"},
            "VrfctnOfTerms":{"Sh256Sgntr":"KVHFmdTD6A..."}}
}
end note
Mojaloop -> FXP: POST /fxTransfer
FXP -> FXP: Check to see liquidity for the transfer can still be provided.  
alt if FXP can provide the payment liquidity
FXP -> Mojaloop: PUT /fxTransfer/{ID}
note right
**pacs.002.001.15**
**Financial Institution to Financial Institution** 
**Payment Status Report**
"GrpHdr": {
    "MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",
    "CreDtTm":"2024-11-04T12:57:45.228Z"},
"TxInfAndSts":{
    "ExctnConf":"ou1887jmG-l...",
    "PrcgDt":{
        "DtTm":"2024-11-04T12:57:45.213Z"},
        "TxSts":"RESV"}}
end note
Mojaloop -> PayerDFSP: PUT /fxTransfer/{ID}

else

FXP -> Mojaloop: PUT /fxTransfer/{ID}/error 
note right
**pacs.002.001.15**
**Financial Institution to Financial Institution** 
**Payment Status Report**
"GrpHdr": {
    "MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",
    "CreDtTm":"2024-11-04T12:57:45.228Z"},
"TxInfAndSts":{"StsRsnInf":{"Rsn": {"Cd":"ErrorCode"}}
end note
Mojaloop -> PayerDFSP: PUT /fxTransfer/{ID}/error 
end


@enduml

PlantUML version 1.2022.6(Tue Jun 21 18:34:49 BST 2022)
(GPLV2 source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>