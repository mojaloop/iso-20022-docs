<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1001px" preserveAspectRatio="none" style="width:1149px;height:1001px;background:#FFFFFF;" version="1.1" viewBox="0 0 1149 1001" width="1149px" zoomAndPan="magnify"><defs/><g><rect height="27.6094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="246" x="452.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="236" x="457.5" y="29.5332">Transfer ISO 20022 Message Flow</text><rect height="385.0313" style="stroke:#000000;stroke-width:1.5;fill:none;" width="791" x="351" y="563.0078"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="407" x2="407" y1="76.2188" y2="965.0391"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="563.5" x2="563.5" y1="76.2188" y2="965.0391"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="694.5" x2="694.5" y1="76.2188" y2="965.0391"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="361" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="368" y="65.1426">Payer DFSP</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="361" y="964.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="368" y="985.5723">Payer DFSP</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="528.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="535.5" y="65.1426">Mojaloop</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="528.5" y="964.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="535.5" y="985.5723">Mojaloop</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="647.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="654.5" y="65.1426">Payee DFSP</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="647.5" y="964.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="654.5" y="985.5723">Payee DFSP</text><polygon fill="#181818" points="552,287.4375,562,291.4375,552,295.4375,556,291.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407" x2="558" y1="291.4375" y2="291.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="414" y="286.5811">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="425" y="286.5811">POST /quotes</text><path d="M5,91.2188 L5,477.2188 L402,477.2188 L402,101.2188 L392,91.2188 L5,91.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M392,91.2188 L392,101.2188 L402,101.2188 L392,91.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="79" x="11" y="109.7139">pacs.009.001</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="223" x="11" y="126.0654">Financial Institution Credit Transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="142.417">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="11" y="158.7686">"GrpHdr":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="27" y="175.1201">"MsgId":"01JBVM1D2MR6D4WBWWYY3ZHGMM",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="27" y="191.4717">"CreDtTm":"2024-11-04T12:57:45.812Z",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="27" y="207.8232">"NbOfTxs":"1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="27" y="224.1748">"SttlmInf":{"SttlmMtd":"CLRG"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="27" y="240.5264">"PmtInstrXpryDtTm":"2024-11-04T12:58:45.810Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="11" y="256.8779">"CdtTrfTxInf":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="27" y="273.2295">"PmtId":{"TxId":"01JBVM13SQYP507JB1DYBZVCMF"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="27" y="289.5811">"ChrgBr":"CRED",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="27" y="305.9326">"Cdtr":{"Id":{"PrvtId":{"Othr":{"SchmeNm":{"Prtry":"MSISDN"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="155" y="322.2842">"Id":"16665551002"}}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="27" y="338.6357">"Dbtr":{"Id":{"PrvtId":{"Othr":{"SchmeNm":{"Prtry":"MSISDN"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="155" y="354.9873">"Id":"16135551001"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="59" y="371.3389">"Name":"Joe Blogs"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="27" y="387.6904">"CdtrAgt":{"FinInstnId":{"Othr":{"Id":"payee-dfsp"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="27" y="404.042">"DbtrAgt":{"FinInstnId":{"Othr":{"Id":"payer-dfsp\"}}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="27" y="420.3936">"IntrBkSttlmAmt":{"Ccy":"MWK",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="59" y="436.7451">"ActiveCurrencyAndAmount":"1080"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="360" x="27" y="453.0967">"VrfctnOfTerms":{"IlpV4PrepPacket":"DIICzQAAAAAAAaX..."}}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="469.4482">}</text><polygon fill="#181818" points="683,500.6563,693,504.6563,683,508.6563,687,504.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="564" x2="689" y1="504.6563" y2="504.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="571" y="499.7998">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="582" y="499.7998">POST  /quotes</text><line style="stroke:#181818;stroke-width:1.0;" x1="695" x2="737" y1="535.0078" y2="535.0078"/><line style="stroke:#181818;stroke-width:1.0;" x1="737" x2="737" y1="535.0078" y2="548.0078"/><line style="stroke:#181818;stroke-width:1.0;" x1="696" x2="737" y1="548.0078" y2="548.0078"/><polygon fill="#181818" points="706,544.0078,696,548.0078,706,552.0078,702,548.0078" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="702" y="530.1514">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="713" y="530.1514">Check to see if Payee can receive the payment.</text><path d="M351,563.0078 L412,563.0078 L412,571.3594 L402,581.3594 L351,581.3594 L351,563.0078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="385.0313" style="stroke:#000000;stroke-width:1.5;" width="791" x="351" y="563.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="366" y="577.5029">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="189" x="427" y="576.4268">[if Payee can receive the payment]</text><polygon fill="#181818" points="575,684.4688,565,688.4688,575,692.4688,571,688.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="569" x2="694" y1="688.4688" y2="688.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="581" y="683.6123">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="592" y="683.6123">PUT /quotes/{ID}</text><path d="M700,586.3594 L700,775.3594 L1127,775.3594 L1127,596.3594 L1117,586.3594 L700,586.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1117,586.3594 L1117,596.3594 L1127,596.3594 L1117,586.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="706" y="604.8545">pacs.002.001.15</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="270" x="706" y="621.2061">Financial Institution to Financial Institution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="976" y="621.2061"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="706" y="637.5576">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="706" y="653.9092">"GrpHdr":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="722" y="670.2607">"MsgId":"01JBVM1E2CRWFZFPN7W4AZJ976",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="722" y="686.6123">"CreDtTm":"2024-11-04T12:57:46.828Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="706" y="702.9639">"TxInfAndSts":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="390" x="722" y="719.3154">"ExctnConf":"-rL3liKeLrsNy7GHJaKgAzeDL_8IVnvER5zUlP1YAoc",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="722" y="735.667">"PrcgDt":{"DtTm":"2024-11-04T12:57:46.812Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="722" y="752.0186">"TxSts":"COMM"}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="706" y="768.3701">}</text><polygon fill="#181818" points="418,799.5781,408,803.5781,418,807.5781,414,803.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="412" x2="563" y1="803.5781" y2="803.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="424" y="798.7217">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="435" y="798.7217">PUT/quotes/{ID}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="351" x2="1142" y1="812.5781" y2="812.5781"/><polygon fill="#181818" points="418,883.9844,408,887.9844,418,891.9844,414,887.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="412" x2="563" y1="887.9844" y2="887.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="424" y="883.1279">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="435" y="883.1279">PUT/quotes/{ID}/error</text><path d="M569,818.5781 L569,942.5781 L903,942.5781 L903,828.5781 L893,818.5781 L569,818.5781 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M893,818.5781 L893,828.5781 L903,828.5781 L893,818.5781 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="575" y="837.0732">pacs.002.001.15</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="270" x="575" y="853.4248">Financial Institution to Financial Institution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="845" y="853.4248"> </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="575" y="869.7764">Payment Status Report</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="575" y="886.1279">"GrpHdr": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="591" y="902.4795">"MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="591" y="918.8311">"CreDtTm":"2024-11-04T12:57:45.228Z"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="575" y="935.1826">"TxInfAndSts":{"StsRsnInf":{"Rsn": {"Cd":"ErrorCode"}}</text><!--MD5=[b5f257d885b68dfa065b4c7c50222fbe]
@startuml

Title Transfer ISO 20022 Message Flow
participant PayerDFSP as "Payer DFSP"
participant Mojaloop as "Mojaloop"
participant PayeeDFSP as "Payee DFSP"

autonumber

PayerDFSP -> Mojaloop: POST /quotes
note left
**pacs.009.001**
**Financial Institution Credit Transfer**
{
"GrpHdr":{
    "MsgId":"01JBVM1D2MR6D4WBWWYY3ZHGMM",
    "CreDtTm":"2024-11-04T12:57:45.812Z",
    "NbOfTxs":"1",
    "SttlmInf":{"SttlmMtd":"CLRG"},
    "PmtInstrXpryDtTm":"2024-11-04T12:58:45.810Z"},
"CdtTrfTxInf":{
    "PmtId":{"TxId":"01JBVM13SQYP507JB1DYBZVCMF"},
    "ChrgBr":"CRED",
    "Cdtr":{"Id":{"PrvtId":{"Othr":{"SchmeNm":{"Prtry":"MSISDN"},
                                    "Id":"16665551002"}}}},
    "Dbtr":{"Id":{"PrvtId":{"Othr":{"SchmeNm":{"Prtry":"MSISDN"},
                                    "Id":"16135551001"}}},
            "Name":"Joe Blogs"},
    "CdtrAgt":{"FinInstnId":{"Othr":{"Id":"payee-dfsp"}}},
    "DbtrAgt":{"FinInstnId":{"Othr":{"Id":"payer-dfsp\"}}},
    "IntrBkSttlmAmt":{"Ccy":"MWK",
            "ActiveCurrencyAndAmount":"1080"},
    "VrfctnOfTerms":{"IlpV4PrepPacket":"DIICzQAAAAAAAaX..."}}
}
end note
Mojaloop -> PayeeDFSP: POST  /quotes
PayeeDFSP -> PayeeDFSP: Check to see if Payee can receive the payment.  
alt if Payee can receive the payment
PayeeDFSP -> Mojaloop: PUT /quotes/{ID}
note right
**pacs.002.001.15**
**Financial Institution to Financial Institution** 
{
"GrpHdr":{
    "MsgId":"01JBVM1E2CRWFZFPN7W4AZJ976",
    "CreDtTm":"2024-11-04T12:57:46.828Z"},
"TxInfAndSts":{
    "ExctnConf":"-rL3liKeLrsNy7GHJaKgAzeDL_8IVnvER5zUlP1YAoc",
    "PrcgDt":{"DtTm":"2024-11-04T12:57:46.812Z"},
    "TxSts":"COMM"}
}
end note
Mojaloop -> PayerDFSP: PUT/quotes/{ID}

else

Mojaloop -> PayerDFSP: PUT/quotes/{ID}/error 
note right
**pacs.002.001.15**
**Financial Institution to Financial Institution** 
**Payment Status Report**
"GrpHdr": {
    "MsgId":"01JBVM1CGC5A18XQVYYRF68FD1",
    "CreDtTm":"2024-11-04T12:57:45.228Z"},
"TxInfAndSts":{"StsRsnInf":{"Rsn": {"Cd":"ErrorCode"}}
end note
end

@enduml

PlantUML version 1.2022.6(Tue Jun 21 18:34:49 BST 2022)
(GPLV2 source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>